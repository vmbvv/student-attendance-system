<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Teacher Dashboard</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="page dashboard">
      <header class="dash-header">
        <div>
          <p class="eyebrow">Багшийн самбар</p>
          <h1>Тавтай морил</h1>
          <p id="header-date" class="muted"></p>
        </div>
        <div class="header-actions">
          <span id="teacher-id" class="pill"></span>
          <a href="/auth/login.html" id="logout-link">Системээс гарах</a>
        </div>
      </header>

      <section class="panel">
        <div class="panel-head">
          <h2>Тойм</h2>
          <div id="overview-status" class="status"></div>
        </div>
        <div class="stat-grid">
          <div class="stat-card">
            <p class="muted">Нийт сурагчид</p>
            <strong id="stat-students">0</strong>
          </div>
          <div class="stat-card">
            <p class="muted">Бүртгэсэн</p>
            <strong id="stat-marked">0</strong>
          </div>
          <div class="stat-card">
            <p class="muted">Бүртгээгүй</p>
            <strong id="stat-unmarked">0</strong>
          </div>
        </div>
      </section>

      <div class="layout">
        <section class="panel">
          <div class="panel-head">
            <h2>Жагсаалт</h2>
            <div class="pill secondary" id="roster-count">0</div>
          </div>

          <div class="stack">
            <label for="student-search">Нэрээр хайх</label>
            <input
              id="student-search"
              name="search"
              placeholder="Нэрийг оруулна уу"
              autocomplete="off"
            />
          </div>

          <div class="inline">
            <button type="button" id="students-prev" class="secondary small">
              Өмнөх
            </button>
            <span id="students-page" class="muted"></span>
            <button type="button" id="students-next" class="secondary small">
              Дараах
            </button>
            <label for="students-limit" class="muted">Хуудас бүр</label>
            <select id="students-limit" class="small">
              <option value="10">10</option>
              <option value="25" selected>25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>

          <button type="button" id="toggle-add-student">Сурагч нэмэх</button>
          <form id="add-student-form" class="card spaced hidden">
            <div class="grid-two">
              <div>
                <label for="firstname">Нэр</label>
                <input id="firstname" name="firstname" required />
              </div>
              <div>
                <label for="lastname">Овог</label>
                <input id="lastname" name="lastname" required />
              </div>
            </div>
            <div class="grid-two">
              <div>
                <label for="password">Нууц үг</label>
                <input id="password" name="password" type="password" required />
              </div>
              <div>
                <label for="confirmPassword">Нууц үг давтах</label>
                <input
                  id="confirmPassword"
                  name="confirmPassword"
                  type="password"
                  required
                />
              </div>
            </div>
            <button type="submit">Сурагч нэмэх</button>
            <div id="add-student-status" class="status"></div>
          </form>

          <ul id="students-list" class="list"></ul>
        </section>

        <section class="panel">
          <div class="panel-head">
            <h2>Ирц</h2>
            <div class="inline">
              <label class="muted" for="attendance-date">Огноо</label>
              <input id="attendance-date" type="date" />
              <button type="button" id="reload-attendance">Ачаалах</button>
            </div>
          </div>
          <div class="table-wrap">
            <table class="simple-table">
              <thead>
                <tr>
                  <th>Сурагч</th>
                  <th>ID</th>
                  <th>Статус</th>
                </tr>
              </thead>
              <tbody id="attendance-table-body"></tbody>
            </table>
          </div>
          <div class="panel-foot">
            <div id="attendance-status" class="status"></div>
            <button type="button" id="save-attendance">Хадгалах</button>
          </div>
        </section>
      </div>

      <section class="panel">
        <div class="panel-head">
          <h2>Сурагчийн ирц</h2>
          <div class="inline">
            <button type="button" id="month-prev">Өмнөх</button>
            <span id="month-label" class="muted"></span>
            <button type="button" id="month-next">Дараах</button>
          </div>
        </div>
        <div id="student-detail-content" class="student-detail muted">
          Сурагчийн нэрэн дээр дарж ирцийг харна уу
        </div>
      </section>

      <section class="panel">
        <div class="panel-head">
          <h2>Хураангуй</h2>
          <div class="inline">
            <label for="summary-sort" class="muted">Эрэмбэлэх</label>
            <select id="summary-sort">
              <option value="">Нэрээр</option>
              <option value="present_percent">Суусан %</option>
              <option value="present_count">Суусан тоогоор</option>
              <option value="absent_count">Тасалсан тоогоор</option>
              <option value="total_days">Нийт өдрөөр</option>
            </select>
            <button type="button" id="load-summary">Шинэчлэх</button>
          </div>
        </div>
        <div class="table-wrap">
          <table class="simple-table">
            <thead>
              <tr>
                <th>Нэр</th>
                <th>Суусан %</th>
                <th>Суусан</th>
                <th>Тасалсан</th>
                <th>Чөлөөтэй</th>
                <th>Нийт</th>
              </tr>
            </thead>
            <tbody id="summary-body"></tbody>
          </table>
        </div>
        <div class="panel-foot">
          <div id="summary-status" class="status"></div>
          <button
            type="button"
            id="load-summary-more"
            class="secondary small hidden"
          >
            Цааш ачаалах
          </button>
        </div>
      </section>

      <section class="panel">
        <div class="panel-head">
          <h2>Нууц үг солих</h2>
        </div>
        <form id="teacher-password-form" class="card spaced">
          <div class="grid-two">
            <div>
              <label for="oldPassword">Хуучин Нууц үг</label>
              <input
                id="oldPassword"
                name="oldPassword"
                type="password"
                required
              />
            </div>
            <div>
              <label for="newPassword">Шинэ Нууц үг</label>
              <input
                id="newPassword"
                name="newPassword"
                type="password"
                required
              />
            </div>
          </div>
          <div>
            <label for="confirmNewPassword">Шинэ Нууц үг давтах</label>
            <input
              id="confirmNewPassword"
              name="confirmNewPassword"
              type="password"
              required
            />
          </div>
          <button type="submit">Нууц үг шинэчлэх</button>
          <div id="teacher-password-status" class="status"></div>
        </form>
      </section>
    </main>
    <script src="/teacher/dashboard.js" type="module" defer></script>
  </body>
</html>
